(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1222:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(7620),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,children:d,...u}=a;return(0,r.createElement)("svg",{ref:n,...o,width:l,height:l,stroke:s,strokeWidth:c?24*Number(i)/Number(l):i,className:"lucide lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),...u},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...(Array.isArray(d)?d:[d])||[]])});return a.displayName="".concat(e),a}},19769:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1222).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},27541:(e,t,a)=>{"use strict";var r=a(43041);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},35971:(e,t,a)=>{Promise.resolve().then(a.bind(a,82198))},82198:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(54568),o=a(7620),n=a(27541),s=a(96138),l=a(1222);let i=(0,l.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,l.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var d=a(19769),u=a(71094),m=a.n(u);function h(e){let{onJoin:t}=e,[a,l]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[x,p]=(0,o.useState)(!1),[g,k]=(0,o.useState)(!1),b=null;try{b=(0,n.useRouter)()}catch(e){}let f=e=>{setTimeout(()=>{k(!1);let a="/room?id=".concat(e);t?t(e):b?b.push(a):window.location.href=a},500)},w=async()=>{if(!u.trim())return void await m().fire({icon:"warning",title:"Nama diperlukan",text:"Masukkan nama Anda sebelum membuat room."});k(!0);let e=(()=>{let e="23456789ABCDEFGHJKLMNPQRSTUVWXYZ",t="";for(let a=0;a<6;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t})(),t=u.trim();try{let a=new URLSearchParams({room_id:e,host_name:t}),r=await fetch("/bakends/create-room.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString(),cache:"no-store",credentials:"same-origin"}),o=r.ok;try{let e=await r.clone().json();"boolean"==typeof e.success&&(o=o&&e.success)}catch(e){}if(!o&&!(await fetch("/bakends/create-room.php?room_id=".concat(encodeURIComponent(e),"&host_name=").concat(encodeURIComponent(t),"&_=").concat(Date.now()),{cache:"no-store",credentials:"same-origin"})).ok)throw Error("Create room failed");await m().fire({icon:"success",title:"Room dibuat",html:"Kode Room: <b>".concat(e,"</b>"),confirmButtonText:"Masuk"}),localStorage.setItem("opensketch_username",t),f(e)}catch(e){await m().fire({icon:"error",title:"Gagal membuat room",text:"Server PHP tidak mencatat room. Coba lagi."}),k(!1)}},y=async()=>{let e=a.trim().toUpperCase();if(!e)return;if(6!==e.length)return void await m().fire({icon:"warning",title:"Kode tidak valid",text:"Kode room harus 6 karakter."});k(!0);let t=async e=>{try{if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json();return{ok:!!(t&&(!0===t.exists||"true"===t.exists||1===t.exists)),host:null==t?void 0:t.host_name}}let t=(await e.text()).trim().toLowerCase();if("1"===t||"true"===t||t.includes("exists")||t.includes("ada"))return{ok:!0};return t.includes("not found")||"0"===t||"false"===t||t.includes("tidak"),{ok:!1}}catch(e){return{ok:!1}}},r=async t=>{let a=await m().fire({title:"Masukkan Nama Anda",input:"text",inputAttributes:{maxlength:"24",autocapitalize:"off",autocorrect:"off"},inputValidator:e=>e&&e.trim()?e.trim().length>24?"Maksimal 24 karakter":void 0:"Nama tidak boleh kosong",confirmButtonText:"Masuk",showCancelButton:!0,cancelButtonText:"Batal"});if(!a.isConfirmed)return void k(!1);let r=(a.value||"").trim().slice(0,24);localStorage.setItem("opensketch_username",r),f(e)};try{let a=await fetch("/bakends/cekroom.php?room_id=".concat(encodeURIComponent(e),"&_=").concat(Date.now()),{cache:"no-store",credentials:"same-origin"});if(a.ok&&(await t(a)).ok)return void await r();let o=await fetch("/api/check-room.php?room_id=".concat(encodeURIComponent(e),"&_=").concat(Date.now()),{cache:"no-store"});if(o.ok&&(await t(o)).ok)return void await r();await m().fire({icon:"error",title:"Ditolak",text:"Kode room tidak terdaftar atau server tidak memberikan jawaban yang valid."}),k(!1)}catch(e){await m().fire({icon:"error",title:"Tidak bisa terhubung",text:"Cek koneksi internet atau server validasi."}),k(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex flex-col items-center justify-center p-4 relative",children:(0,r.jsxs)("div",{className:"max-w-md w-full text-center space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-blue-600 p-4 rounded-full mb-4 shadow-lg",children:(0,r.jsx)(s.A,{size:48,className:"text-white"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"OpenSketch"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400 font-medium",children:"Collaborative whiteboard. Draw together in real-time."})]}),x?(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-800 p-8 rounded-xl shadow-xl border border-gray-200 dark:border-neutral-700 space-y-6 animate-in fade-in zoom-in duration-300",children:[(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(d.A,{size:24,className:"text-blue-500"}),"Enter Your Name"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Others will see you as the host."})]}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"e.g. Saiful, Alex...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-neutral-600 bg-gray-50 dark:bg-neutral-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&w()}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>p(!1),className:"flex-1 py-3 px-4 bg-gray-200 dark:bg-neutral-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium",children:"Cancel"}),(0,r.jsx)("button",{onClick:w,disabled:g||!u.trim(),className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all",children:g?"Creating...":"Enter Room"})]})]}):(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-800 p-8 rounded-xl shadow-xl border border-gray-200 dark:border-neutral-700 space-y-6",children:[(0,r.jsxs)("button",{onClick:()=>{p(!0)},disabled:g,className:"w-full py-4 px-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition-all transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[(0,r.jsx)(i,{size:20}),(0,r.jsx)("span",{children:"Start New Drawing"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-neutral-600"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white dark:bg-neutral-800 text-gray-500",children:"OR JOIN EXISTING"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value.toUpperCase()),placeholder:"Enter Room Code",disabled:g,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-neutral-600 bg-gray-50 dark:bg-neutral-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none uppercase tracking-widest text-center font-mono placeholder:normal-case placeholder:tracking-normal disabled:opacity-50 transition-all",maxLength:6}),(0,r.jsxs)("button",{onClick:y,disabled:!a||g,className:"w-full py-3 px-6 font-semibold rounded-lg shadow transition-all flex items-center justify-center gap-2\n                    ".concat(a&&!g?"bg-emerald-600 hover:bg-emerald-700 text-white transform hover:scale-[1.02]":"bg-gray-200 dark:bg-neutral-700 text-gray-400 cursor-not-allowed"),children:[g&&a?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(c,{size:20}),g&&a?"Checking...":"Join Room"]})]})]}),(0,r.jsx)("div",{className:"pt-8 text-center space-y-1",children:(0,r.jsx)("p",{className:"text-xs text-gray-400 font-medium px-4",children:"\xa9 2025 haniipp.space | OpenSketch. All rights reserved."})})]})})}},96138:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1222).A)("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]])}},e=>{e.O(0,[688,587,18,358],()=>e(e.s=35971)),_N_E=e.O()}]);