(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{9643:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ek});var a=r(54568),s=r(7620),n=r(71094),i=r.n(n),o=r(27541),l=r(96442),d=r(99779),c=r(65754),x=r(49003),g=r(43030),m=r(77373),b=r(97152),h=r(66970),u=r(70474),p=r(24546),y=r(56410),f=r(19760),v=r(10614),k=r(31241),j=r(54902),w=r(57806),N=r(18335),z=r(92568),C=r(51115);let A=[{type:c.p.HAND,icon:x.A,label:"Hand (H)"},{type:c.p.SELECTION,icon:g.A,label:"Selection (V)"},{type:c.p.RECTANGLE,icon:m.A,label:"Rectangle (R)"},{type:c.p.ROUND_RECT,icon:b.A,label:"Round Rect"},{type:c.p.CIRCLE,icon:h.A,label:"Circle (O)"},{type:c.p.TRIANGLE,icon:u.A,label:"Triangle"},{type:c.p.RHOMBUS,icon:p.A,label:"Diamond"},{type:c.p.HEXAGON,icon:y.A,label:"Hexagon"},{type:c.p.ARROW,icon:f.A,label:"Arrow (A)"},{type:c.p.LINE,icon:v.A,label:"Line (L)"},{type:c.p.PENCIL,icon:k.A,label:"Draw (P)"},{type:c.p.TEXT,icon:j.A,label:"Text (T)"},{type:c.p.ERASER,icon:w.A,label:"Eraser (E)"}],E=()=>{let{activeTool:e,setActiveTool:t,isDarkMode:r,toggleDarkMode:n,isSidebarOpen:i}=(0,d.P)(),o=(0,s.useRef)(null),l=e=>{e.stopPropagation()};return(0,a.jsx)("div",{className:"fixed z-[100] flex items-center justify-center\n        bottom-4 left-2 right-2 md:left-1/2 md:right-auto md:top-4 md:bottom-auto md:transform md:-translate-x-1/2\n        pointer-events-none transition-transform duration-300 ease-in-out\n        ".concat(i?"translate-y-[200%] md:translate-y-0":"translate-y-0","\n      "),children:(0,a.jsxs)("div",{className:"flex items-center gap-1 p-1.5 bg-white dark:bg-zinc-800 shadow-xl rounded-xl border border-gray-200 dark:border-zinc-700 overflow-x-auto max-w-full no-scrollbar pointer-events-auto overscroll-x-contain",style:{touchAction:"pan-x"},onPointerDown:l,onPointerMove:l,onPointerUp:l,onTouchStart:l,onTouchMove:l,onTouchEnd:l,onWheel:l,children:[A.map(r=>(0,a.jsx)("button",{onClick:()=>t(r.type),className:"p-2 rounded-lg transition-all flex-shrink-0 flex items-center justify-center ".concat(e===r.type?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-200 shadow-sm":"hover:bg-gray-100 text-gray-700 dark:text-gray-300 dark:hover:bg-zinc-700"),title:r.label,children:(0,a.jsx)(r.icon,{size:18,className:e===r.type?"stroke-2":"stroke-1.5"})},r.type)),(0,a.jsx)("button",{onClick:()=>{o.current&&o.current.click()},className:"p-2 rounded-lg hover:bg-gray-100 text-gray-700 dark:text-gray-300 dark:hover:bg-zinc-700 transition-all flex-shrink-0 flex items-center justify-center",title:"Insert Image",children:(0,a.jsx)(N.A,{size:18,className:"stroke-1.5"})}),(0,a.jsx)("input",{type:"file",ref:o,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onload=e=>{var t;let r=null==(t=e.target)?void 0:t.result;if(r){let e=new CustomEvent("whiteboard:insert-image",{detail:r});window.dispatchEvent(e)}},e.readAsDataURL(r)}o.current&&(o.current.value="")}}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-zinc-600 mx-1 flex-shrink-0"}),(0,a.jsx)("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 transition-colors flex-shrink-0",title:"Toggle Theme",children:r?(0,a.jsx)(z.A,{size:18}):(0,a.jsx)(C.A,{size:18})})]})})};var S=r(85973),I=r(14486),R=r(84990),T=r(19769),L=r(17023),P=r(81810),D=r(3927),O=r(17478),_=r(76005),M=r(99357),G=r(75097),H=r(71823),W=r(38078),B=r(60032),F=r(65390),U=r(97325),V=r(75424),X=r(11674),Z=r(82078),q=r(75892),J=r(52566);let Y=["#000000","#ef4444","#22c55e","#3b82f6","#eab308","#a855f7","#f97316","#ffffff"],K=()=>{let{strokeColor:e,setStrokeColor:t,strokeWidth:r,setStrokeWidth:n,opacity:o,setOpacity:l,gridType:x,setGridType:g,isSidebarOpen:m,toggleSidebar:b,setActiveTool:h,roomId:u,roomHost:p}=(0,d.P)(),y=async(e,t)=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),await i().fire({toast:!0,position:"bottom-start",icon:"success",timer:1600,showConfirmButton:!1,title:"".concat(t," berhasil disalin")});else throw Error("Clipboard API unavailable")}catch(a){let r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-9999px",r.style.top="0",document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy")?await i().fire({toast:!0,position:"bottom-start",icon:"success",timer:1600,showConfirmButton:!1,title:"".concat(t," berhasil disalin")}):await i().fire({icon:"info",title:"".concat(t),text:e})}catch(r){await i().fire({icon:"info",title:"".concat(t),text:e})}document.body.removeChild(r)}},f=async()=>{let e=window.location.href;if(navigator.share)try{await navigator.share({title:"OpenSketch Room",text:"Join me on OpenSketch room ".concat(u," and let's draw together!"),url:e})}catch(e){console.log("Share dismissed")}else y(e,"Public link")},v=async e=>{let t=window.location.href;if("whatsapp"===e){let e="https://api.whatsapp.com/send?text=".concat(encodeURIComponent("Come draw with me on OpenSketch! \uD83C\uDFA8\uD83D\uDD8C️"),"%20").concat(encodeURIComponent(t));window.open(e,"_blank")}else"instagram"===e&&(await y(t,"Link"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href="instagram://story-camera":window.open("https://instagram.com","_blank"))},j=e=>{switch(h(c.p.PENCIL),e){case"sketch":n(2),l(.6),t("#000000");break;case"ink":n(3),l(1),t("#000000");break;case"marker":n(10),l(.9),t("#3b82f6");break;case"highlighter":n(30),l(.4),t("#eab308")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:b,className:"\n          fixed top-1/2 -translate-y-1/2 z-[60]\n          w-8 h-12 bg-white dark:bg-zinc-800 \n          border-y border-r border-gray-200 dark:border-zinc-700 \n          rounded-r-lg shadow-md flex items-center justify-center\n          text-gray-600 dark:text-gray-300 hover:text-blue-500\n          transition-all duration-300\n          ".concat(m?"left-[240px]":"left-0","\n        "),style:{touchAction:"none"},children:m?(0,a.jsx)(S.A,{size:20}):(0,a.jsx)(I.A,{size:20})}),(0,a.jsxs)("div",{className:"\n          fixed top-1/2 -translate-y-1/2 left-0 z-50\n          w-[240px] bg-white dark:bg-zinc-800 \n          border-y border-r border-gray-200 dark:border-zinc-700 \n          shadow-xl rounded-r-xl p-4 flex flex-col gap-6\n          transition-transform duration-300\n          ".concat(m?"translate-x-0":"-translate-x-full","\n          max-h-[90vh] overflow-y-auto no-scrollbar\n        "),style:{touchAction:"pan-y"},children:[u&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(R.A,{size:16}),(0,a.jsx)("span",{children:"Collab Room"})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 font-medium px-1 overflow-hidden",children:[(0,a.jsx)(T.A,{size:12,className:"flex-shrink-0"}),(0,a.jsxs)("span",{className:"truncate max-w-[150px]",title:p,children:["Host: ",p]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-zinc-700/50 p-2 rounded-lg border border-gray-200 dark:border-zinc-600",children:[(0,a.jsx)("span",{className:"font-mono text-sm font-bold tracking-widest text-gray-800 dark:text-gray-200 flex-1 text-center",children:u.slice(0,6)}),(0,a.jsx)("button",{onClick:()=>{u&&y(u,"Room ID")},className:"p-1.5 hover:bg-white dark:hover:bg-zinc-600 rounded text-gray-500 dark:text-gray-400 transition-colors",title:"Copy Room ID",children:(0,a.jsx)(L.A,{size:14})})]})]}),u&&(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(P.A,{size:16}),(0,a.jsx)("span",{children:"Brush Presets"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("sketch"),className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 transition-all group",title:"Sketch Pencil",children:(0,a.jsx)(D.A,{size:18,className:"text-gray-600 dark:text-gray-300 group-hover:text-blue-500"})}),(0,a.jsx)("button",{onClick:()=>j("ink"),className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 transition-all group",title:"Ink Pen",children:(0,a.jsx)(k.A,{size:18,className:"text-gray-600 dark:text-gray-300 group-hover:text-blue-500"})}),(0,a.jsx)("button",{onClick:()=>j("marker"),className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 transition-all group",title:"Marker",children:(0,a.jsx)(O.A,{size:18,className:"text-gray-600 dark:text-gray-300 group-hover:text-blue-500"})}),(0,a.jsx)("button",{onClick:()=>j("highlighter"),className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 transition-all group",title:"Highlighter",children:(0,a.jsx)(_.A,{size:18,className:"text-gray-600 dark:text-gray-300 group-hover:text-blue-500"})})]})]}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(M.A,{size:16}),(0,a.jsx)("span",{children:"Stroke Color"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[Y.map(r=>(0,a.jsx)("button",{onClick:()=>t(r),className:"w-8 h-8 rounded-full border border-gray-200 dark:border-zinc-600 transition-transform hover:scale-110 ".concat(e===r?"ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-zinc-800":""),style:{backgroundColor:r},"aria-label":"Select color ".concat(r)},r)),(0,a.jsx)("div",{className:"relative w-8 h-8 rounded-full overflow-hidden border border-gray-200 dark:border-zinc-600",children:(0,a.jsx)("input",{type:"color",value:e,onChange:e=>t(e.target.value),className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] cursor-pointer p-0 m-0 border-0",title:"Custom Color"})})]})]}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{size:16}),(0,a.jsx)("span",{children:"Opacity"})]}),(0,a.jsxs)("span",{className:"text-xs",children:[Math.round(100*o),"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:o,onChange:e=>l(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-blue-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{size:16}),(0,a.jsx)("span",{children:"Thickness"})]}),(0,a.jsxs)("span",{className:"text-xs",children:[r,"px"]})]}),(0,a.jsx)("input",{type:"range",min:"1",max:"50",value:r,onChange:e=>n(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-blue-600"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(w.A,{size:16}),(0,a.jsx)("span",{children:"Eraser"})]}),(0,a.jsx)("button",{onClick:()=>h(c.p.ERASER),className:"px-3 py-1 text-xs rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 text-gray-700 dark:text-gray-300",title:"Activate Eraser",children:"Use"})]}),(0,a.jsx)(()=>{let[e,t]=(0,s.useState)(30);return(0,s.useEffect)(()=>{try{let e=localStorage.getItem("opensketch_eraser_size"),r=e?parseInt(e):30;!isNaN(r)&&r>0&&r<=200&&t(r)}catch(e){}},[]),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{size:16}),(0,a.jsx)("span",{children:"Eraser Size"})]}),(0,a.jsxs)("span",{className:"text-xs",children:[e,"px"]})]}),(0,a.jsx)("input",{type:"range",min:6,max:120,value:e,onChange:e=>{let r=parseInt(e.target.value);t(r),(e=>{try{localStorage.setItem("opensketch_eraser_size",String(e))}catch(e){}try{window.dispatchEvent(new CustomEvent("whiteboard:eraser-size",{detail:e}))}catch(e){}})(r)},className:"w-full h-2 bg-gray-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-blue-600"})]})},{})]}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(H.A,{size:16}),(0,a.jsx)("span",{children:"Canvas Grid"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("button",{onClick:()=>g(c.j.NONE),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat(x===c.j.NONE?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300"),children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded border border-current opacity-50"}),"Blank"]}),(0,a.jsxs)("button",{onClick:()=>g(c.j.LINES),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat(x===c.j.LINES?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300"),children:[(0,a.jsx)(W.A,{size:16}),"Grid Lines"]}),(0,a.jsxs)("button",{onClick:()=>g(c.j.DOTS),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat(x===c.j.DOTS?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300"),children:[(0,a.jsx)(B.A,{size:16}),"Dots"]})]})]}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(F.A,{size:16}),(0,a.jsx)("span",{children:"Share Public Link"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsxs)("button",{onClick:f,className:"col-span-2 flex items-center justify-center gap-2 p-2 rounded-lg bg-emerald-50 hover:bg-emerald-100 dark:bg-emerald-900/30 dark:hover:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800 transition-all text-xs font-medium",title:"Share via App/Mobile",children:[(0,a.jsx)(F.A,{size:16}),(0,a.jsx)("span",{children:"Share App"})]}),(0,a.jsxs)("button",{onClick:()=>{y(window.location.href,"Public link")},className:"col-span-2 flex items-center justify-center gap-2 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-zinc-700 transition-all text-xs",title:"Copy Link",children:[(0,a.jsx)(U.A,{size:16}),(0,a.jsx)("span",{children:"Copy URL"})]}),(0,a.jsxs)("button",{onClick:()=>v("whatsapp"),className:"col-span-2 flex items-center justify-center gap-2 p-2 rounded-lg bg-green-50 hover:bg-green-100 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 transition-all text-xs",title:"Share to WhatsApp",children:[(0,a.jsx)(V.A,{size:16}),(0,a.jsx)("span",{children:"WhatsApp"})]}),(0,a.jsxs)("button",{onClick:()=>v("instagram"),className:"col-span-2 flex items-center justify-center gap-2 p-2 rounded-lg bg-pink-50 hover:bg-pink-100 dark:bg-pink-900/30 dark:hover:bg-pink-900/50 text-pink-700 dark:text-pink-300 border border-pink-200 dark:border-pink-800 transition-all text-xs",title:"Share to Instagram Story",children:[(0,a.jsx)(X.A,{size:16}),(0,a.jsx)("span",{children:"Instagram"})]})]})]}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-200 dark:bg-zinc-700"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 pb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(N.A,{size:16}),(0,a.jsx)("span",{children:"Export & Save"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:export-png"))},className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-zinc-700 transition-all text-xs",title:"Download PNG",children:[(0,a.jsx)(Z.A,{size:18}),(0,a.jsx)("span",{children:"Save PNG"})]}),(0,a.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:export-pdf"))},className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-zinc-700 transition-all text-xs",title:"Download PDF",children:[(0,a.jsx)(q.A,{size:18}),(0,a.jsx)("span",{children:"Save PDF"})]}),(0,a.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:export-svg"))},className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-zinc-700 transition-all text-xs",title:"Download SVG",children:[(0,a.jsx)(J.A,{size:18}),(0,a.jsx)("span",{children:"Save SVG"})]}),(0,a.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:copy-img"))},className:"flex flex-col items-center justify-center gap-1 p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-zinc-700 transition-all text-xs",title:"Copy to Clipboard",children:[(0,a.jsx)(L.A,{size:18}),(0,a.jsx)("span",{children:"Copy Image"})]})]})]})]})]})};var Q=r(13227),$=r(6101),ee=r(78272),et=r(61167);let er=()=>{let e="p-1.5 md:p-2.5 bg-white dark:bg-zinc-800 text-gray-700 dark:text-gray-200 rounded-lg shadow-md border border-gray-200 dark:border-zinc-700 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors active:scale-95 flex items-center justify-center";return(0,a.jsx)("div",{className:"fixed z-[60] flex gap-2 top-4 left-4  md:top-auto md:bottom-4 md:left-4",style:{touchAction:"none"},children:(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2 bg-white/50 dark:bg-zinc-900/50 p-1 md:p-0 rounded-xl md:bg-transparent md:dark:bg-transparent backdrop-blur-sm md:backdrop-blur-none",children:[(0,a.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:undo"))},className:e,title:"Undo (Ctrl+Z)",children:(0,a.jsx)(Q.A,{className:"w-4 h-4 md:w-5 md:h-5"})}),(0,a.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:redo"))},className:e,title:"Redo (Ctrl+Y)",children:(0,a.jsx)($.A,{className:"w-4 h-4 md:w-5 md:h-5"})}),(0,a.jsx)("div",{className:"w-px h-auto bg-gray-300 dark:bg-zinc-600 mx-0.5 md:hidden"}),(0,a.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:zoom-out"))},className:e,title:"Zoom Out",children:(0,a.jsx)(ee.A,{className:"w-4 h-4 md:w-5 md:h-5"})}),(0,a.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:zoom-in"))},className:e,title:"Zoom In",children:(0,a.jsx)(et.A,{className:"w-4 h-4 md:w-5 md:h-5"})})]})})};var ea=r(12598),es=r(29304),en=r(2838),ei=r(75454);let eo=e=>{let{roomId:t}=e,[r,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),[x,g]=(0,s.useState)(""),[m,b]=(0,s.useState)(0),[h,u]=(0,s.useState)("Guest"),[p,y]=(0,s.useState)(!1),[f,v]=(0,s.useState)(""),[k,j]=(0,s.useState)(""),w=(0,s.useRef)(null),N=(0,s.useRef)(null),z=(0,s.useRef)(null),C=(0,s.useRef)(null);return((0,s.useEffect)(()=>{n(!0);{let e=localStorage.getItem("opensketch_username");e?u(e):y(!0);try{C.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2346/2346-preview.mp3"),C.current.volume=.5}catch(e){console.warn("Audio init warning",e)}}},[]),(0,s.useEffect)(()=>{if(r&&t){try{w.current=(0,en.io)("https://server.art.haniipp.space",{path:"/socket.io",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:500,timeout:1e4,autoConnect:!0}),w.current.on("connect",()=>{var e,r;console.log("Chat socket connected",null==(e=w.current)?void 0:e.id),t&&(null==(r=w.current)||r.emit("join-room",t))}),w.current.on("reconnect",()=>{var e;console.log("Chat socket reconnected"),t&&(null==(e=w.current)||e.emit("join-room",t))}),w.current.on("chat-message",e=>{if((null==e?void 0:e.type)==="system"){let t=(e.username||"").trim().toLowerCase();if("guest"===t||""===t)return}if(c(t=>[...t,{...e,isMe:!1}]),!o){b(e=>e+1);try{var t;null==(t=C.current)||t.play().catch(()=>{})}catch(e){}}}),w.current.on("connect_error",e=>{console.error("Chat socket connect_error:",e)}),w.current.on("reconnect_error",e=>{console.error("Chat socket reconnect_error:",e)})}catch(e){console.error("ChatWidget Socket Error:",e)}return()=>{var e;null==(e=w.current)||e.disconnect()}}},[r,t,h]),(0,s.useEffect)(()=>{if(o){var e;null==(e=N.current)||e.scrollIntoView({behavior:"smooth"})}},[d,o]),(0,s.useEffect)(()=>{o&&(b(0),setTimeout(()=>{var e;return null==(e=z.current)?void 0:e.focus()},300))},[o]),r)?(0,a.jsxs)("div",{className:"fixed flex flex-col items-end pointer-events-none font-sans bottom-24 right-3 md:bottom-6 md:right-6",style:{zIndex:99999},children:[(0,a.jsxs)("div",{className:"\n            pointer-events-auto mb-3 bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-zinc-700 overflow-hidden transition-all duration-300 origin-bottom-right transform \n            ".concat(o?"scale-100 opacity-100 translate-y-0":"scale-90 opacity-0 translate-y-10 h-0 mb-0 pointer-events-none","\n            \n            /* Responsive Width */\n            w-[90vw] md:w-80\n        "),children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-600 flex justify-between items-center text-white shadow-md select-none touch-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{size:20,className:"fill-current opacity-80"}),(0,a.jsx)("span",{className:"font-bold text-sm",children:"Live Chat"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:async()=>{let e=await i().fire({title:"Ganti Nama",input:"text",inputValue:h,inputAttributes:{maxlength:"24",autocapitalize:"off",autocorrect:"off"},showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal",inputValidator:e=>e&&e.trim()?e.trim().length>24?"Maksimal 24 karakter":void 0:"Nama tidak boleh kosong"});if(e.isConfirmed){let t=(e.value||"").trim().slice(0,24)||"Guest";try{localStorage.setItem("opensketch_username",t)}catch(e){}u(t);try{window.dispatchEvent(new CustomEvent("user:name-changed",{detail:t}))}catch(e){}}},className:"px-2 py-1 text-xs bg-white/15 hover:bg-white/25 rounded-md",title:"Ganti Nama",children:h}),p&&(0,a.jsxs)("div",{className:"pointer-events-auto fixed inset-0 z-[100000] flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=f.trim().slice(0,24);if(r){try{localStorage.setItem("opensketch_username",r)}catch(e){}u(r);try{window.dispatchEvent(new CustomEvent("user:name-changed",{detail:r}))}catch(e){}if(y(!1),v(""),l(!0),k){var a;j("");let e={id:(0,ei.A)(),username:r,message:k,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isMe:!0,type:"text"};c(t=>[...t,e]),(null==(a=w.current)?void 0:a.connected)&&w.current.emit("chat-message",{roomId:t,...e}),g("")}}},className:"relative w-full max-w-sm rounded-2xl overflow-hidden shadow-2xl border border-gray-200 dark:border-zinc-700",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white p-4",children:[(0,a.jsx)("h3",{className:"text-base font-semibold",children:"Masukkan Nama Anda"}),(0,a.jsx)("p",{className:"text-xs opacity-90 mt-0.5",children:"Nama ini akan digunakan di obrolan live."})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-5",children:[(0,a.jsx)("input",{autoFocus:!0,value:f,onChange:e=>v(e.target.value),placeholder:"cth: Hanif",className:"w-full rounded-xl bg-gray-100 dark:bg-zinc-800 border-none px-3 py-2.5 outline-none focus:ring-2 focus:ring-blue-500 text-sm text-gray-900 dark:text-white"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{y(!1),v("")},className:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-gray-200 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Batal"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:!f.trim(),children:"Simpan"})]})]})]})]}),(0,a.jsx)("button",{onClick:()=>l(!1),className:"p-1.5 hover:bg-white/20 rounded-full transition-colors active:scale-95",children:(0,a.jsx)(ea.A,{size:20})})]})]}),(0,a.jsxs)("div",{className:"h-[280px] md:h-[320px] overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-zinc-900 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-zinc-700",children:[0===d.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm gap-2 opacity-60 select-none",children:[(0,a.jsx)(V.A,{size:32}),(0,a.jsx)("p",{children:"Say hello to team!"})]}),d.map(e=>"system"===e.type?(0,a.jsx)("div",{className:"flex justify-center my-2",children:(0,a.jsxs)("span",{className:"text-[10px] bg-gray-200 dark:bg-zinc-700 text-gray-500 dark:text-gray-400 px-2 py-0.5 rounded-full select-none",children:[e.username," ",e.message]})},e.id):(0,a.jsxs)("div",{className:"flex flex-col ".concat(e.isMe?"items-end":"items-start"),children:[(0,a.jsxs)("div",{className:"\n                    max-w-[85%] px-3 py-2 text-sm shadow-sm rounded-2xl break-words\n                    ".concat(e.isMe?"bg-blue-600 text-white rounded-tr-sm":"bg-white dark:bg-zinc-800 border border-gray-100 dark:border-zinc-700 text-gray-800 dark:text-gray-200 rounded-tl-sm","\n                "),children:[!e.isMe&&(0,a.jsx)("span",{className:"block text-[10px] font-bold text-blue-500 mb-0.5 select-none",children:e.username}),e.message]}),(0,a.jsx)("span",{className:"text-[9px] text-gray-400 mt-1 px-1 select-none",children:e.timestamp})]},e.id)),(0,a.jsx)("div",{ref:N})]}),(0,a.jsxs)("form",{onSubmit:e=>{var r;if(null==e||e.preventDefault(),!x.trim())return;if(!h||"Guest"===h){j(x.trim()),y(!0);return}let a={id:(0,ei.A)(),username:h,message:x.trim(),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isMe:!0,type:"text"};c(e=>[...e,a]),(null==(r=w.current)?void 0:r.connected)&&w.current.emit("chat-message",{roomId:t,...a}),g("")},className:"p-2 bg-white dark:bg-zinc-800 border-t border-gray-200 dark:border-zinc-700 flex gap-2 items-center",children:[(0,a.jsx)("input",{ref:z,type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"Type here...",className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-zinc-900 border-none rounded-full focus:ring-2 focus:ring-blue-500 outline-none text-base md:text-sm text-gray-900 dark:text-white placeholder-gray-400"}),(0,a.jsx)("button",{type:"submit",disabled:!x.trim(),className:"p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md flex items-center justify-center transition-transform active:scale-90",children:(0,a.jsx)(es.A,{size:18,className:x.trim()?"translate-x-0.5":""})})]})]}),(0,a.jsxs)("button",{onClick:()=>{if(!h||"Guest"===h)return void y(!0);l(!o)},className:"pointer-events-auto relative w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-transform hover:scale-110 active:scale-95",style:{boxShadow:"0 4px 14px 0 rgba(37, 99, 235, 0.39)"},children:[o?(0,a.jsx)(ea.A,{size:28}):(0,a.jsx)(V.A,{size:28}),!o&&m>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white dark:border-zinc-900 animate-bounce",children:m>9?"9+":m})]})]}):null};var el=r(65202);let ed=()=>{let e=(0,d.P)(),t=Array.isArray(e.participants)?e.participants:[],[r,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)("");(0,s.useEffect)(()=>{try{let e=window.__participants;Array.isArray(e)&&n(e)}catch(e){}let e=e=>{n(Array.isArray(null==e?void 0:e.detail)?e.detail:[])};return window.addEventListener("participants:update",e),()=>{window.removeEventListener("participants:update",e)}},[]);let x=r.length>0?r:t,g=e=>{window.dispatchEvent(new CustomEvent("whiteboard:locate-user",{detail:e})),window.innerWidth<768&&o(!1)},m=(0,s.useMemo)(()=>{let e=l.trim().toLowerCase();return e?x.filter(t=>t.name.toLowerCase().includes(e)):x},[x,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed top-4 right-14 md:right-24 z-[99999] pointer-events-auto",children:(0,a.jsxs)("button",{onClick:()=>o(!i),className:"p-2 md:p-3 bg-white/95 backdrop-blur dark:bg-zinc-800/90 text-gray-700 dark:text-gray-200 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-700 hover:bg-blue-50/80 dark:hover:bg-zinc-700 hover:text-blue-600 transition-all active:scale-95 flex items-center justify-center gap-2 group",title:"Room Members",children:[(0,a.jsx)(R.A,{className:"w-4 h-4 md:w-5 md:h-5 group-hover:scale-110 transition-transform"}),(0,a.jsx)("span",{className:"text-xs font-bold bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-200 px-1.5 py-0.5 rounded-md min-w-[20px]",children:x.length})]})}),(0,a.jsx)("button",{className:"md:hidden fixed top-1/2 -translate-y-1/2 right-0 z-[100010] pointer-events-auto bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-l-xl shadow-lg px-2 py-2 active:scale-95","aria-label":"Toggle participants drawer",onClick:()=>o(!i),children:i?(0,a.jsx)(I.A,{size:18,className:"text-gray-600 dark:text-gray-300"}):(0,a.jsx)(S.A,{size:18,className:"text-gray-600 dark:text-gray-300"})}),i&&(0,a.jsxs)("div",{className:"hidden md:block fixed top-16 right-6 z-[100000] w-[22rem] bg-white/95 dark:bg-zinc-800/95 backdrop-blur rounded-xl shadow-2xl border border-gray-200 dark:border-zinc-700 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-200 dark:border-zinc-700 bg-gray-50/70 dark:bg-zinc-900/40",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h3",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[(0,a.jsx)(R.A,{size:16})," Members"]}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,a.jsx)(ea.A,{size:16})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(el.A,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"Search participant...",className:"w-full pl-8 pr-3 py-2 rounded-md border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-sm text-gray-700 dark:text-gray-200 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"max-h-72 overflow-y-auto p-2 space-y-1 scrollbar-thin",children:[0===m.length&&(0,a.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 py-6 text-center",children:"No participants found"}),m.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 dark:hover:bg-zinc-700 rounded-lg group transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full border border-white dark:border-zinc-600 shadow-sm flex-shrink-0",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-200 truncate font-medium",children:e.name})]}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-1.5 rounded-md text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Locate on Canvas",children:(0,a.jsx)(el.A,{size:14})})]},e.id))]})]}),i&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 z-[99990] bg-black/30 pointer-events-auto",onClick:()=>o(!1)}),(0,a.jsxs)("div",{className:"md:hidden ".concat(i?"translate-x-0":"translate-x-full"," fixed inset-y-0 right-0 z-[100000] w-72 max-w-[85vw] bg-white dark:bg-zinc-800 border-l border-gray-200 dark:border-zinc-700 shadow-2xl transition-transform duration-300 pointer-events-auto"),children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-200 dark:border-zinc-700 bg-gray-50/70 dark:bg-zinc-900/40",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[(0,a.jsx)(R.A,{size:16})," Members"]}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,a.jsx)(ea.A,{size:16})})]}),(0,a.jsxs)("div",{className:"relative mt-2",children:[(0,a.jsx)(el.A,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"Search participant...",className:"w-full pl-8 pr-3 py-2 rounded-md border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-sm text-gray-700 dark:text-gray-200 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"h-[calc(100%-64px)] overflow-y-auto p-2 space-y-1",children:[0===m.length&&(0,a.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 py-6 text-center",children:"No participants found"}),m.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 dark:hover:bg-zinc-700 rounded-lg group transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full border border-white dark:border-zinc-600 shadow-sm flex-shrink-0",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-200 truncate font-medium",children:e.name})]}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-1.5 rounded-md text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-all opacity-100",title:"Locate on Canvas",children:(0,a.jsx)(el.A,{size:14})})]},e.id))]})]})]})};var ec=r(23140),ex=r(80083),eg=r(99605),em=r(82075),eb=r(75830);let eh=()=>{let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(null),[i,o]=(0,s.useState)(1),[l,d]=(0,s.useState)("#000000"),[c,x]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=e=>{let r=(null==e?void 0:e.detail)||{};n(r.id||null),o("number"==typeof r.opacity?r.opacity:1),d("string"==typeof r.stroke?r.stroke:"#000000"),x("number"==typeof r.strokeWidth?r.strokeWidth:0),t(!0)},r=()=>{t(!1),n(null)};return window.addEventListener("image-sidebar:show",e),window.addEventListener("image-sidebar:hide",r),()=>{window.removeEventListener("image-sidebar:show",e),window.removeEventListener("image-sidebar:hide",r)}},[]);let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{window.dispatchEvent(new CustomEvent(e,{detail:{id:r,...t}}))}catch(e){}};return e&&r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>t(!1),className:"fixed top-1/2 -translate-y-1/2 z-[70] w-8 h-12 bg-white dark:bg-zinc-800 border-y border-r border-gray-200 dark:border-zinc-700 rounded-r-lg shadow-md flex items-center justify-center text-gray-600 dark:text-gray-300 hover:text-blue-500 transition-all duration-300 left-[240px]",style:{touchAction:"none"},"aria-label":"Close Image Sidebar",children:(0,a.jsx)(S.A,{size:20})}),(0,a.jsxs)("div",{className:"fixed top-1/2 -translate-y-1/2 left-0 z-[69] w-[240px] bg-white dark:bg-zinc-800 border-y border-r border-gray-200 dark:border-zinc-700 shadow-xl rounded-r-xl p-4 flex flex-col gap-6 max-h-[90vh] overflow-y-auto no-scrollbar",style:{touchAction:"pan-y"},children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300 flex items-center gap-2",children:[(0,a.jsx)(ec.A,{size:16}),(0,a.jsx)("span",{children:"Image Controls"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{size:16}),(0,a.jsx)("span",{children:"Opacity"})]}),(0,a.jsxs)("span",{className:"text-xs",children:[Math.round(100*i),"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:i,onChange:e=>{let t=parseFloat(e.target.value);o(t),g("image:opacity",{opacity:t})},className:"w-full h-2 bg-gray-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-blue-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(M.A,{size:16}),(0,a.jsx)("span",{children:"Edge"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:l,onChange:e=>{let t=e.target.value;d(t),g("image:stroke",{stroke:t})},className:"w-8 h-8 rounded border border-gray-200 dark:border-zinc-600",title:"Edge Color"}),(0,a.jsx)("input",{type:"range",min:0,max:20,value:c,onChange:e=>{let t=parseInt(e.target.value);x(t),g("image:strokeWidth",{strokeWidth:t})},className:"flex-1 h-2 bg-gray-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-blue-600",title:"Edge Width"}),(0,a.jsxs)("span",{className:"w-8 text-right text-xs text-gray-500 dark:text-gray-400",children:[c,"px"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(ec.A,{size:16}),(0,a.jsx)("span",{children:"Layer"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>g("image:layer",{action:"bringToFront"}),className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 flex items-center justify-center gap-1 text-xs",children:[(0,a.jsx)(ex.A,{size:16}),(0,a.jsx)("span",{children:"Front"})]}),(0,a.jsxs)("button",{onClick:()=>g("image:layer",{action:"sendToBack"}),className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 flex items-center justify-center gap-1 text-xs",children:[(0,a.jsx)(eg.A,{size:16}),(0,a.jsx)("span",{children:"Back"})]}),(0,a.jsxs)("button",{onClick:()=>g("image:layer",{action:"bringForward"}),className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 flex items-center justify-center gap-1 text-xs",children:[(0,a.jsx)(em.A,{size:16}),(0,a.jsx)("span",{children:"Up"})]}),(0,a.jsxs)("button",{onClick:()=>g("image:layer",{action:"sendBackwards"}),className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 dark:bg-zinc-700/50 dark:hover:bg-zinc-700 border border-gray-200 dark:border-zinc-700 flex items-center justify-center gap-1 text-xs",children:[(0,a.jsx)(eb.A,{size:16}),(0,a.jsx)("span",{children:"Down"})]})]})]})]})]}):null};var eu=r(54925),ep=r(6438);let ey=()=>{let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{t(e.detail)};return window.addEventListener("whiteboard:screenshot-ready",e),()=>{window.removeEventListener("whiteboard:screenshot-ready",e)}},[]);let i=async()=>{if(e)try{let t=await (await fetch(e)).blob();if(navigator.share){let e=new File([t],"sketch.png",{type:"image/png"});await navigator.share({title:"My Sketch",text:"Created with OpenSketch by Hanif Abdurrohim",files:[e]})}else await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Share failed",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed top-4 right-4 z-[99999]",children:(0,a.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("whiteboard:request-screenshot"))},className:"p-2 md:p-3 bg-white dark:bg-zinc-800 text-gray-700 dark:text-gray-200 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-700 hover:bg-blue-50 dark:hover:bg-zinc-700 hover:text-blue-600 transition-all active:scale-95 group flex items-center justify-center",title:"Take Screenshot",children:(0,a.jsx)(eu.A,{className:"w-4 h-4 md:w-5 md:h-5 group-hover:animate-pulse"})})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-gray-200 dark:border-zinc-700 flex flex-col max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-zinc-800 flex justify-between items-center bg-gray-50 dark:bg-zinc-800/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eu.A,{size:18,className:"text-blue-500"}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Snapshot Preview"})]}),(0,a.jsx)("button",{onClick:()=>{t(null),n(!1)},className:"p-1 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-full transition-colors",children:(0,a.jsx)(ea.A,{size:20,className:"text-gray-500"})})]}),(0,a.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-black/50 overflow-auto flex-1 flex items-center justify-center",children:(0,a.jsx)("img",{src:e,alt:"Screenshot Preview",className:"max-w-full h-auto rounded-lg shadow-md border border-gray-200 dark:border-zinc-700"})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-zinc-800 flex gap-3 bg-white dark:bg-zinc-900",children:[(0,a.jsxs)("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg border border-gray-300 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-gray-700 dark:text-gray-300 font-medium transition-colors",children:[r?(0,a.jsx)(ep.A,{size:18,className:"text-green-500"}):(0,a.jsx)(F.A,{size:18}),r?"Copied!":"Share"]}),(0,a.jsxs)("button",{onClick:()=>{if(!e)return;let t=document.createElement("a");t.download="opensketch-hanif-".concat(new Date().getTime(),".png"),t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-md transition-all active:scale-95",children:[(0,a.jsx)(Z.A,{size:18}),"Download"]})]})]})})]})},ef=(0,l.default)(()=>Promise.all([r.e(355),r.e(286),r.e(445),r.e(151),r.e(262)]).then(r.bind(r,24262)).then(e=>e.Whiteboard),{loadableGenerated:{webpack:()=>[24262]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-neutral-100 dark:bg-zinc-900 text-gray-400 animate-pulse",children:"Preparing Canvas..."})});function ev(){let e=(0,o.useSearchParams)().get("id"),{setRoomHost:t}=(0,d.P)(),r=d.P.getState().roomHost;return(s.useEffect(()=>{try{{let e=localStorage.getItem("opensketch_username");e&&e.trim()&&t(e.trim().slice(0,24))}}catch(e){}},[t]),(0,s.useEffect)(()=>{e&&(async()=>{try{let r=await fetch("/api/check-room.php?room_id=".concat(e));if(!r.ok)return;if((r.headers.get("content-type")||"").includes("application/json")){let e=await r.json();e&&e.exists&&"string"==typeof e.host_name&&e.host_name.trim()?t(e.host_name.trim().slice(0,24)):d.P.getState().roomHost||t("Guest Room")}else d.P.getState().roomHost||t("Guest Room")}catch(e){console.error("Failed to fetch PHP room info",e),d.P.getState().roomHost||t("Guest Room")}})()},[e,t,r]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 w-screen h-screen overflow-hidden bg-neutral-100 dark:bg-zinc-900 overscroll-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",children:(0,a.jsx)(ef,{roomId:e})}),(0,a.jsxs)("div",{className:"absolute inset-0 z-[100] pointer-events-none",children:[(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(K,{})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(er,{})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(E,{})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(eo,{roomId:e})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(ey,{})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(ed,{})}),(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(eh,{})}),(0,a.jsxs)("button",{className:"absolute bottom-24 left-4 md:bottom-4 md:left-4 text-xs text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100 bg-white/80 dark:bg-zinc-800/80 border border-gray-200/70 dark:border-zinc-700/70 rounded-lg px-2 py-1 shadow-sm backdrop-blur hidden md:inline-flex items-center gap-1 opacity-80 hover:opacity-100 transition pointer-events-auto",title:"Copy Room ID",onClick:async()=>{try{await navigator.clipboard.writeText(e),await i().fire({toast:!0,position:"bottom-start",timer:1800,showConfirmButton:!1,icon:"success",title:"ID room berhasil disalin"})}catch(t){await i().fire({icon:"info",title:"Room ID",text:e})}},children:["OpenSketch • ",e.slice(0,8),"..."]})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center w-screen h-screen bg-neutral-50 dark:bg-zinc-900 flex-col gap-4",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-gray-500",children:"No Room ID Detected"}),(0,a.jsx)("a",{href:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back Home"})]})}function ek(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center w-screen h-screen bg-neutral-50 dark:bg-zinc-900",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading OpenSketch..."})}),children:(0,a.jsx)(ev,{})})}},29693:(e,t,r)=>{Promise.resolve().then(r.bind(r,9643))},65754:(e,t,r)=>{"use strict";r.d(t,{j:()=>s,p:()=>a});var a=function(e){return e.SELECTION="selection",e.RECTANGLE="rectangle",e.ROUND_RECT="round_rect",e.CIRCLE="circle",e.TRIANGLE="triangle",e.RHOMBUS="rhombus",e.HEXAGON="hexagon",e.LINE="line",e.ARROW="arrow",e.PENCIL="pencil",e.TEXT="text",e.ERASER="eraser",e.HAND="hand",e.IMAGE="image",e}({}),s=function(e){return e.NONE="none",e.LINES="lines",e.DOTS="dots",e}({})},99779:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var a=r(21367),s=r(65754);let n=(0,a.vt)(e=>({activeTool:s.p.SELECTION,strokeColor:"#000000",strokeWidth:2,fillColor:"transparent",roughness:1,opacity:1,isDarkMode:!1,scale:1,gridType:s.j.NONE,isSidebarOpen:!1,roomId:null,roomHost:null,setActiveTool:t=>e({activeTool:t}),setStrokeColor:t=>e({strokeColor:t}),setStrokeWidth:t=>e({strokeWidth:t}),setFillColor:t=>e({fillColor:t}),setRoughness:t=>e({roughness:t}),setOpacity:t=>e({opacity:t}),toggleDarkMode:()=>e(e=>({isDarkMode:!e.isDarkMode})),setScale:t=>e({scale:t}),setGridType:t=>e({gridType:t}),toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen})),setRoomId:t=>e({roomId:t}),setRoomHost:t=>e({roomHost:t})}))}},e=>{e.O(0,[688,692,587,18,358],()=>e(e.s=29693)),_N_E=e.O()}]);